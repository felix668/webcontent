var WX={getParam:function(b,d){var c=new RegExp("(?:\\?|#|&)"+b+"=([^&#?]*)(?:$|&|#)","i");var a=c.exec(d||window.location.href);return a?a[1]:""},pit:function(c,d){var a=d;try{a=parseInt(c,10)}catch(b){}if(a!=a){a=d}return a},cutstr:function(b,a){if(b.length<=a){return b}else{return b.substr(0,a)+"..."}}};window.WX=WX;WX.share=function(d){var c=WX.getParam("resh_by","");var b={img:d.cover,url:d.url,title:d.title,desc:d.intro};document.addEventListener("WeixinJSBridgeReady",function a(){WeixinJSBridge.on("menu:share:appmessage",function(e){WeixinJSBridge.invoke("sendAppMessage",{img_url:b.img,img_width:"70",img_height:"100",link:b.url,desc:b.desc,title:b.title},function(f){})});WeixinJSBridge.on("menu:share:timeline",function(e){WeixinJSBridge.invoke("shareTimeline",{img_url:b.img,img_width:"70",img_height:"100",link:b.url,desc:b.desc,title:b.title},function(f){})});WeixinJSBridge.on("menu:share:weibo",function(e){WeixinJSBridge.invoke("shareWeibo",{content:b.desc,url:b.url},function(f){})})});return{set:function(e){if(!e){return}b.title=e.title||b.title;b.url=e.url||b.url;b.img=e.img||b.img;b.desc=WX.cutstr(e.desc||b.desc,40)}}};